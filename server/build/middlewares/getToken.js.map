{"version":3,"sources":["../../src/middlewares/getToken.js"],"names":["getToken","req","res","next","token","headers","promise","Promise","resolve","reject","jwt","verify","process","env","SECRET_KEY","err","decode","status","send","message","body"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,MAC3BC,KAD2B,GACjBH,IAAII,OADa,CAC3BD,KAD2B;AAEnC;;AACA,MAAME,UAAU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/C,QAAIL,KAAJ,EAAW;AACTM,6BAAIC,MAAJ,CAAWP,KAAX,EAAkBQ,QAAQC,GAAR,CAAYC,UAA9B,EAA0C,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACzD,YAAID,GAAJ,EAAS;AACPP,kBAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,oCAAX,EAArB,CAAR;AACD,SAFD,MAEO;AACLlB,cAAImB,IAAJ,CAASJ,MAAT,GAAkBA,MAAlB;AACAR,kBAAQL,MAAR;AACD;AACF,OAPD;AAQD,KATD,MASO;AACLK,cAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,0CAAX,EAArB,CAAR;AACD;AACF,GAbe,CAAhB;AAcA,SAAOb,OAAP;AACD,CAlBD;kBAmBeN,Q","file":"getToken.js","sourcesContent":["import jwt from 'jsonwebtoken';\n\nconst getToken = (req, res, next) => {\n  const { token } = req.headers;\n  /* eslint-disable no-unused-vars */\n  const promise = new Promise((resolve, reject) => {\n    if (token) {\n      jwt.verify(token, process.env.SECRET_KEY, (err, decode) => {\n        if (err) {\n          resolve(res.status(401).send({ message: 'authentication fail! invalid token' }));\n        } else {\n          req.body.decode = decode;\n          resolve(next());\n        }\n      });\n    } else {\n      resolve(res.status(401).send({ message: 'authentication fail! please send a token' }));\n    }\n  });\n  return promise;\n};\nexport default getToken;\n"]}