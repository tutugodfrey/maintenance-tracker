{"version":3,"sources":["../../src/middlewares/getToken.js"],"names":["getToken","req","res","next","token","headers","promise","Promise","resolve","reject","jwt","verify","process","env","SECRET_KEY","err","decode","status","send","message","body"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,MAC3BC,KAD2B,GACjBH,IAAII,OADa,CAC3BD,KAD2B;AAEnC;;AACA,MAAME,UAAU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/C,QAAIL,KAAJ,EAAW;AACTM,6BAAIC,MAAJ,CAAWP,KAAX,EAAkBQ,QAAQC,GAAR,CAAYC,UAA9B,EAA0C,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACzD,YAAID,GAAJ,EAAS;AACPP,kBAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,oCAAX,EAArB,CAAR;AACD,SAFD,MAEO;AACLlB,cAAImB,IAAJ,CAASJ,MAAT,GAAkBA,MAAlB;AACAR,kBAAQL,MAAR;AACD;AACF,OAPD;AAQD,KATD,MASO;AACLK,cAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,0CAAX,EAArB,CAAR;AACD;AACF,GAbe,CAAhB;AAcA,SAAOb,OAAP;AACD,CAlBD;kBAmBeN,Q","file":"getToken.js","sourcesContent":["import jwt from 'jsonwebtoken';\r\n\r\nconst getToken = (req, res, next) => {\r\n  const { token } = req.headers;\r\n  /* eslint-disable no-unused-vars */\r\n  const promise = new Promise((resolve, reject) => {\r\n    if (token) {\r\n      jwt.verify(token, process.env.SECRET_KEY, (err, decode) => {\r\n        if (err) {\r\n          resolve(res.status(401).send({ message: 'authentication fail! invalid Token' }));\r\n        } else {\r\n          req.body.decode = decode;\r\n          resolve(next());\r\n        }\r\n      });\r\n    } else {\r\n      resolve(res.status(401).send({ message: 'authentication fail! please send a token' }));\r\n    }\r\n  });\r\n  return promise;\r\n};\r\nexport default getToken;\r\n"]}