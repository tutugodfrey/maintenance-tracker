{"version":3,"sources":["../../src/middlewares/validateRequestController.js"],"names":["validateCreateRequest","req","res","next","body","category","description","address","urgent","adminId","trim","parseInt","userId","decode","id","validateGetOneRequest","requestId","params","validateAdminGetRequests","isAdmin","validateAdminUpdate","validateUpdateRequest","validateDeleteRequest"],"mappings":"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","file":"validateRequestController.js","sourcesContent":["import { handleResponse } from './../services/services';\n\nexport const validateCreateRequest = (req, res, next) => {\n  const {\n    category,\n    description,\n    address,\n    urgent,\n    adminId,\n  } = req.body;\n\n  if (description.trim() === '' || address.trim() === '' || category.trim() === '') {\n    return handleResponse(res, 400, 'missing required field');\n  }\n  if (!urgent && urgent.trim() !== '') {\n    return handleResponse(res, 400, 'typeError field urgent must be a boolean');\n  }\n  if (!parseInt(adminId, 10)) {\n    return handleResponse(res, 400, 'please select a service');\n  }\n  // pass userId to req.body\n  req.body.userId = req.body.decode.id;\n  return next();\n};\n\nexport const validateGetOneRequest = (req, res, next) => {\n  const requestId = parseInt(req.params.requestId, 10);\n  if (!requestId) {\n    return handleResponse(res, 400, 'missing required field');\n  }\n\n  return next();\n};\n\nexport const validateAdminGetRequests = (req, res, next) => {\n  const { isAdmin } = req.body.decode;\n  if (!isAdmin) {\n    return handleResponse(res, 401, 'you are not authorized to perform this action');\n  }\n\n  return next();\n};\n\nexport const validateAdminUpdate = (req, res, next) => {\n  const requestId = parseInt(req.params.requestId, 10);\n  const {\n    isAdmin,\n  } = req.body.decode;\n  if (!isAdmin) {\n    return handleResponse(res, 401, 'you are not authorized to perform this action');\n  }\n  if (!requestId) {\n    return handleResponse(res, 400, 'missing required field');\n  }\n\n  return next();\n};\n\nexport const validateUpdateRequest = (req, res, next) => {\n  const requestId = parseInt(req.params.requestId, 10);\n  if (!requestId) {\n    return handleResponse(res, 400, 'missing required field');\n  }\n\n  return next();\n};\n\nexport const validateDeleteRequest = (req, res, next) => {\n  const requestId = parseInt(req.params.requestId, 10);\n  if (!requestId) {\n    return handleResponse(res, 400, 'missing required field');\n  }\n\n  return next();\n};\n"]}