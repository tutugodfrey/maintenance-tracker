{"version":3,"sources":["../../src/middlewares/validateRequestController.js"],"names":["validateCreateRequest","req","res","next","body","category","description","address","urgent","adminId","trim","parseInt","userId","decode","id","validateGetOneRequest","requestId","params","validateAdminGetRequests","isAdmin","validateAdminUpdate","validateUpdateRequest","validateDeleteRequest"],"mappings":"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","file":"validateRequestController.js","sourcesContent":["import { handleResponse } from './../services/services';\r\n\r\nexport const validateCreateRequest = (req, res, next) => {\r\n  const {\r\n    category,\r\n    description,\r\n    address,\r\n    urgent,\r\n    adminId,\r\n  } = req.body;\r\n\r\n  if (description.trim() === '' || address.trim() === '' || category.trim() === '') {\r\n    return handleResponse(res, 400, 'missing required field');\r\n  }\r\n  if (!urgent && urgent.trim() !== '') {\r\n    return handleResponse(res, 400, 'typeError field urgent must be a boolean');\r\n  }\r\n  if (!parseInt(adminId, 10)) {\r\n    return handleResponse(res, 400, 'please select a service');\r\n  }\r\n  // pass userId to req.body\r\n  req.body.userId = req.body.decode.id;\r\n  return next();\r\n};\r\n\r\nexport const validateGetOneRequest = (req, res, next) => {\r\n  const requestId = parseInt(req.params.requestId, 10);\r\n  if (!requestId) {\r\n    return handleResponse(res, 400, 'missing required field');\r\n  }\r\n\r\n  return next();\r\n};\r\n\r\nexport const validateAdminGetRequests = (req, res, next) => {\r\n  const { isAdmin } = req.body.decode;\r\n  if (!isAdmin) {\r\n    return handleResponse(res, 401, 'you are not authorized to perform this action');\r\n  }\r\n\r\n  return next();\r\n};\r\n\r\nexport const validateAdminUpdate = (req, res, next) => {\r\n  const requestId = parseInt(req.params.requestId, 10);\r\n  const {\r\n    isAdmin,\r\n  } = req.body.decode;\r\n  if (!isAdmin) {\r\n    return handleResponse(res, 401, 'you are not authorized to perform this action');\r\n  }\r\n  if (!requestId) {\r\n    return handleResponse(res, 400, 'missing required field');\r\n  }\r\n\r\n  return next();\r\n};\r\n\r\nexport const validateUpdateRequest = (req, res, next) => {\r\n  const requestId = parseInt(req.params.requestId, 10);\r\n  if (!requestId) {\r\n    return handleResponse(res, 400, 'missing required field');\r\n  }\r\n\r\n  return next();\r\n};\r\n\r\nexport const validateDeleteRequest = (req, res, next) => {\r\n  const requestId = parseInt(req.params.requestId, 10);\r\n  if (!requestId) {\r\n    return handleResponse(res, 400, 'missing required field');\r\n  }\r\n\r\n  return next();\r\n};\r\n"]}