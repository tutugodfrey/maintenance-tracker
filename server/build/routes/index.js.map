{"version":3,"sources":["../../src/routes/index.js"],"names":["routes","app","get","req","res","status","sendFile","path","join","__dirname","use","swaggerUi","serve","setup","swaggerApiDoc","post","usersUpload","single","validateSignup","UsersController","signup","validateSignin","signin","getServiceName","secureRoute","validateAdminGetRequests","AdminController","getAllRequests","put","validateAdminUpdate","rejectRequest","approveRequest","resolveRequest","validateCreateRequest","RequestController","addRequest","validateGetOneRequest","getOneRequest","validateUpdateRequest","updateRequest","delete","validateDeleteRequest","deleteRequest","validateAddMessage","ContactController","addMessage","getMessages"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AAIA;;AAQA;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,GAAD,EAAS;AACtBA,MAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,QAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,8BAArB,CAAzB;AACD,GAFD;AAGAR,MAAIS,GAAJ,CAAQ,cAAR,EAAwBC,2BAAUC,KAAlC,EAAyCD,2BAAUE,KAAV,CAAgBC,uBAAhB,CAAzC;AACA;AACAb,MAAIc,IAAJ,CAAS,qBAAT,EAAgCC,qBAAYC,MAAZ,CAAmB,eAAnB,CAAhC,EAAqEC,6BAArE,EAAqFC,0BAAgBC,MAArG;AACAnB,MAAIc,IAAJ,CAAS,qBAAT,EAAgCM,6BAAhC,EAAgDF,0BAAgBG,MAAhE;AACArB,MAAIC,GAAJ,CAAQ,uBAAR,EAAiCiB,0BAAgBI,cAAjD;;AAEA;AACAtB,MAAIC,GAAJ,CAAQ,kBAAR,EAA4BsB,kBAA5B,EAAyCC,mDAAzC,EAAmEC,0BAAgBC,cAAnF;AACA1B,MAAI2B,GAAJ,CAAQ,wCAAR,EAAkDJ,kBAAlD,EAA+DK,8CAA/D,EAAoFH,0BAAgBI,aAApG;AACA7B,MAAI2B,GAAJ,CAAQ,qCAAR,EAA+CJ,kBAA/C,EAA4DK,8CAA5D,EAAiFH,0BAAgBK,cAAjG;AACA9B,MAAI2B,GAAJ,CAAQ,qCAAR,EAA+CJ,kBAA/C,EAA4DK,8CAA5D,EAAiFH,0BAAgBM,cAAjG;;AAEA;AACA/B,MAAIc,IAAJ,CAAS,wBAAT,EAAmCS,kBAAnC,EAAgDS,gDAAhD,EAAuEC,4BAAkBC,UAAzF;AACAlC,MAAIC,GAAJ,CAAQ,mCAAR,EAA6CsB,kBAA7C,EAA0DY,gDAA1D,EAAiFF,4BAAkBG,aAAnG;AACApC,MAAIC,GAAJ,CAAQ,wBAAR,EAAkCsB,kBAAlC,EAA+CU,4BAAkBP,cAAjE;AACA1B,MAAI2B,GAAJ,CAAQ,mCAAR,EAA6CJ,kBAA7C,EAA0Dc,gDAA1D,EAAiFJ,4BAAkBK,aAAnG;AACAtC,MAAIuC,MAAJ,CAAW,mCAAX,EAAgDhB,kBAAhD,EAA6DiB,gDAA7D,EAAoFP,4BAAkBQ,aAAtG;AACA;AACAzC,MAAIc,IAAJ,CAAS,kBAAT,EAA6BS,kBAA7B,EAA0CmB,6CAA1C,EAA8DC,4BAAkBC,UAAhF;AACA5C,MAAIC,GAAJ,CAAQ,kBAAR,EAA4BsB,kBAA5B,EAAyCoB,4BAAkBE,WAA3D;AACA,SAAO7C,GAAP;AACD,CA1BD;;kBA4BeD,M","file":"index.js","sourcesContent":["import path from 'path';\nimport swaggerUi from 'swagger-ui-express';\nimport swaggerApiDoc from './../../../swaggerApiDoc/swaggerApiDoc.json';\nimport UsersController from './../controllers/UsersController';\nimport RequestController from './../controllers/RequestController';\nimport ContactController from './../controllers/ContactController';\nimport AdminController from './../controllers/AdminController';\nimport secureRoute from './../middlewares/getToken';\nimport usersUpload from './../middlewares/uploadfile';\nimport {\n  validateSignup,\n  validateSignin,\n} from './../middlewares/validateUsers';\nimport {\n  validateCreateRequest,\n  validateGetOneRequest,\n  validateUpdateRequest,\n  validateDeleteRequest,\n  validateAdminUpdate,\n  validateAdminGetRequests,\n} from './../middlewares/validateRequestController';\nimport { validateAddMessage } from './../middlewares/validateContactController';\n\nconst routes = (app) => {\n  app.get('/', (req, res) => {\n    res.status(200).sendFile(path.join(__dirname, './../../../client/index.html'));\n  });\n  app.use('/api/v1/docs', swaggerUi.serve, swaggerUi.setup(swaggerApiDoc));\n  // routes for us\n  app.post('/api/v1/auth/signup', usersUpload.single('profile-photo'), validateSignup, UsersController.signup);\n  app.post('/api/v1/auth/signin', validateSignin, UsersController.signin);\n  app.get('/api/v1/auth/services', UsersController.getServiceName);\n\n  // admin routes\n  app.get('/api/v1/requests', secureRoute, validateAdminGetRequests, AdminController.getAllRequests);\n  app.put('/api/v1/requests/:requestId/disapprove', secureRoute, validateAdminUpdate, AdminController.rejectRequest);\n  app.put('/api/v1/requests/:requestId/approve', secureRoute, validateAdminUpdate, AdminController.approveRequest);\n  app.put('/api/v1/requests/:requestId/resolve', secureRoute, validateAdminUpdate, AdminController.resolveRequest);\n\n  // user routes\n  app.post('/api/v1/users/requests', secureRoute, validateCreateRequest, RequestController.addRequest);\n  app.get('/api/v1/users/requests/:requestId', secureRoute, validateGetOneRequest, RequestController.getOneRequest);\n  app.get('/api/v1/users/requests', secureRoute, RequestController.getAllRequests);\n  app.put('/api/v1/users/requests/:requestId', secureRoute, validateUpdateRequest, RequestController.updateRequest);\n  app.delete('/api/v1/users/requests/:requestId', secureRoute, validateDeleteRequest, RequestController.deleteRequest);\n  // routes for contacts model\n  app.post('/api/v1/contacts', secureRoute, validateAddMessage, ContactController.addMessage);\n  app.get('/api/v1/contacts', secureRoute, ContactController.getMessages);\n  return app;\n};\n\nexport default routes;\n"]}