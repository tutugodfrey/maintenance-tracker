{"version":3,"sources":["../../src/routes/index.js"],"names":["routes","app","get","req","res","status","sendFile","path","join","__dirname","use","swaggerUi","serve","setup","swaggerApiDoc","post","usersUpload","single","validateSignup","UsersController","signup","validateSignin","signin","getServiceName","secureRoute","validateAdminGetRequests","AdminController","getAllRequests","put","validateAdminUpdate","rejectRequest","approveRequest","resolveRequest","validateCreateRequest","RequestController","addRequest","validateGetOneRequest","getOneRequest","validateUpdateRequest","updateRequest","delete","validateDeleteRequest","deleteRequest","validateAddMessage","ContactController","addMessage","getMessages"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AAIA;;AAQA;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,GAAD,EAAS;AACtBA,MAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,QAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,8BAArB,CAAzB;AACD,GAFD;AAGAR,MAAIS,GAAJ,CAAQ,cAAR,EAAwBC,2BAAUC,KAAlC,EAAyCD,2BAAUE,KAAV,CAAgBC,uBAAhB,CAAzC;AACA;AACAb,MAAIc,IAAJ,CAAS,qBAAT,EAAgCC,qBAAYC,MAAZ,CAAmB,eAAnB,CAAhC,EAAqEC,6BAArE,EAAsFC,0BAAgBC,MAAtG;AACAnB,MAAIc,IAAJ,CAAS,qBAAT,EAAgCM,6BAAhC,EAAgDF,0BAAgBG,MAAhE;AACArB,MAAIC,GAAJ,CAAQ,uBAAR,EAAiCiB,0BAAgBI,cAAjD;;AAEA;AACAtB,MAAIC,GAAJ,CAAQ,kBAAR,EAA4BsB,kBAA5B,EAAyCC,mDAAzC,EAAmEC,0BAAgBC,cAAnF;AACA1B,MAAI2B,GAAJ,CAAQ,wCAAR,EAAkDJ,kBAAlD,EAA+DK,8CAA/D,EAAoFH,0BAAgBI,aAApG;AACA7B,MAAI2B,GAAJ,CAAQ,qCAAR,EAA+CJ,kBAA/C,EAA4DK,8CAA5D,EAAiFH,0BAAgBK,cAAjG;AACA9B,MAAI2B,GAAJ,CAAQ,qCAAR,EAA+CJ,kBAA/C,EAA4DK,8CAA5D,EAAiFH,0BAAgBM,cAAjG;;AAEA;AACA/B,MAAIc,IAAJ,CAAS,wBAAT,EAAmCS,kBAAnC,EAAgDS,gDAAhD,EAAuEC,4BAAkBC,UAAzF;AACAlC,MAAIC,GAAJ,CAAQ,mCAAR,EAA6CsB,kBAA7C,EAA0DY,gDAA1D,EAAiFF,4BAAkBG,aAAnG;AACApC,MAAIC,GAAJ,CAAQ,wBAAR,EAAkCsB,kBAAlC,EAAgDU,4BAAkBP,cAAlE;AACA1B,MAAI2B,GAAJ,CAAQ,mCAAR,EAA6CJ,kBAA7C,EAA0Dc,gDAA1D,EAAiFJ,4BAAkBK,aAAnG;AACAtC,MAAIuC,MAAJ,CAAW,mCAAX,EAAgDhB,kBAAhD,EAA6DiB,gDAA7D,EAAoFP,4BAAkBQ,aAAtG;AACA;AACAzC,MAAIc,IAAJ,CAAS,kBAAT,EAA6BS,kBAA7B,EAA0CmB,6CAA1C,EAA8DC,4BAAkBC,UAAhF;AACA5C,MAAIC,GAAJ,CAAQ,kBAAR,EAA4BsB,kBAA5B,EAAyCoB,4BAAkBE,WAA3D;AACA,SAAO7C,GAAP;AACD,CA1BD;;kBA4BeD,M","file":"index.js","sourcesContent":["import path from 'path';\r\nimport swaggerUi from 'swagger-ui-express';\r\nimport swaggerApiDoc from './../../../swaggerApiDoc/swaggerApiDoc.json';\r\nimport UsersController from './../controllers/UsersController';\r\nimport RequestController from './../controllers/RequestController';\r\nimport ContactController from './../controllers/ContactController';\r\nimport AdminController from './../controllers/AdminController';\r\nimport secureRoute from './../middlewares/getToken';\r\nimport usersUpload from './../middlewares/uploadfile';\r\nimport { \r\n  validateSignup,\r\n   validateSignin \r\n} from './../middlewares/validateUsers';\r\nimport { \r\n  validateCreateRequest,\r\n  validateGetOneRequest,\r\n  validateUpdateRequest,\r\n  validateDeleteRequest,\r\n  validateAdminUpdate,\r\n  validateAdminGetRequests,\r\n} from './../middlewares/validateRequestController';\r\nimport { validateAddMessage } from './../middlewares/validateContactController';\r\n\r\nconst routes = (app) => {\r\n  app.get('/', (req, res) => {\r\n    res.status(200).sendFile(path.join(__dirname, './../../../client/index.html'));\r\n  });\r\n  app.use('/api/v1/docs', swaggerUi.serve, swaggerUi.setup(swaggerApiDoc));\r\n  // routes for us\r\n  app.post('/api/v1/auth/signup', usersUpload.single('profile-photo'), validateSignup,  UsersController.signup);\r\n  app.post('/api/v1/auth/signin', validateSignin, UsersController.signin);\r\n  app.get('/api/v1/auth/services', UsersController.getServiceName);\r\n\r\n  // admin routes\r\n  app.get('/api/v1/requests', secureRoute, validateAdminGetRequests, AdminController.getAllRequests);\r\n  app.put('/api/v1/requests/:requestId/disapprove', secureRoute, validateAdminUpdate, AdminController.rejectRequest);\r\n  app.put('/api/v1/requests/:requestId/approve', secureRoute, validateAdminUpdate, AdminController.approveRequest);\r\n  app.put('/api/v1/requests/:requestId/resolve', secureRoute, validateAdminUpdate, AdminController.resolveRequest);\r\n\r\n  // user routes\r\n  app.post('/api/v1/users/requests', secureRoute, validateCreateRequest, RequestController.addRequest);\r\n  app.get('/api/v1/users/requests/:requestId', secureRoute, validateGetOneRequest, RequestController.getOneRequest);\r\n  app.get('/api/v1/users/requests', secureRoute,  RequestController.getAllRequests);\r\n  app.put('/api/v1/users/requests/:requestId', secureRoute, validateUpdateRequest, RequestController.updateRequest);\r\n  app.delete('/api/v1/users/requests/:requestId', secureRoute, validateDeleteRequest, RequestController.deleteRequest);\r\n  // routes for contacts model\r\n  app.post('/api/v1/contacts', secureRoute, validateAddMessage, ContactController.addMessage);\r\n  app.get('/api/v1/contacts', secureRoute, ContactController.getMessages);\r\n  return app;\r\n}\r\n\r\nexport default routes;\r\n"]}