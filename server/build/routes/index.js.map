{"version":3,"sources":["../../src/routes/index.js"],"names":["Routes","UsersController","RequestController","ContactController","AdminController","app","get","req","res","status","sendFile","path","join","__dirname","use","swaggerUi","serve","setup","swaggerApiDoc","post","usersUpload","single","signup","signin","getServiceName","secureRoute","getAllRequests","put","rejectRequest","approveRequest","resolveRequest","addRequest","getOneRequest","updateRequest","delete","deleteRequest","addMessage","getMessages"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA;AACA,IAAMA;AACJ,oBAAc;AAAA;;AACZ,SAAKC,eAAL,GAAuBA,yBAAvB;AACA,SAAKC,iBAAL,GAAyBA,2BAAzB;AACA,SAAKC,iBAAL,GAAyBA,2BAAzB;AACA,SAAKC,eAAL,GAAuBA,yBAAvB;AACD;AACD;;;AAPI;AAAA;AAAA,2BAQGC,GARH,EAQQ;AACVA,UAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,YAAIC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyBC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,8BAArB,CAAzB;AACD,OAFD;AAGAR,UAAIS,GAAJ,CAAQ,cAAR,EAAwBC,2BAAUC,KAAlC,EAAyCD,2BAAUE,KAAV,CAAgBC,uBAAhB,CAAzC;AACA;AACAb,UAAIc,IAAJ,CAAS,qBAAT,EAAgCC,qBAAYC,MAAZ,CAAmB,eAAnB,CAAhC,EAAqE,KAAKpB,eAAL,CAAqBqB,MAA1F;AACAjB,UAAIc,IAAJ,CAAS,qBAAT,EAAgC,KAAKlB,eAAL,CAAqBsB,MAArD;AACAlB,UAAIC,GAAJ,CAAQ,uBAAR,EAAiC,KAAKL,eAAL,CAAqBuB,cAAtD;;AAEA;AACAnB,UAAIC,GAAJ,CAAQ,kBAAR,EAA4BmB,kBAA5B,EAAyC,KAAKrB,eAAL,CAAqBsB,cAA9D;AACArB,UAAIsB,GAAJ,CAAQ,wCAAR,EAAkDF,kBAAlD,EAA+D,KAAKrB,eAAL,CAAqBwB,aAApF;AACAvB,UAAIsB,GAAJ,CAAQ,qCAAR,EAA+CF,kBAA/C,EAA4D,KAAKrB,eAAL,CAAqByB,cAAjF;AACAxB,UAAIsB,GAAJ,CAAQ,qCAAR,EAA+CF,kBAA/C,EAA4D,KAAKrB,eAAL,CAAqB0B,cAAjF;;AAEA;AACAzB,UAAIc,IAAJ,CAAS,wBAAT,EAAmCM,kBAAnC,EAAgD,KAAKvB,iBAAL,CAAuB6B,UAAvE;AACA1B,UAAIC,GAAJ,CAAQ,mCAAR,EAA6CmB,kBAA7C,EAA0D,KAAKvB,iBAAL,CAAuB8B,aAAjF;AACA3B,UAAIC,GAAJ,CAAQ,wBAAR,EAAkCmB,kBAAlC,EAA+C,KAAKvB,iBAAL,CAAuBwB,cAAtE;AACArB,UAAIsB,GAAJ,CAAQ,mCAAR,EAA6CF,kBAA7C,EAA0D,KAAKvB,iBAAL,CAAuB+B,aAAjF;AACA5B,UAAI6B,MAAJ,CAAW,mCAAX,EAAgDT,kBAAhD,EAA6D,KAAKvB,iBAAL,CAAuBiC,aAApF;AACA;AACA9B,UAAIc,IAAJ,CAAS,kBAAT,EAA6BM,kBAA7B,EAA0C,KAAKtB,iBAAL,CAAuBiC,UAAjE;AACA/B,UAAIC,GAAJ,CAAQ,kBAAR,EAA4BmB,kBAA5B,EAAyC,KAAKtB,iBAAL,CAAuBkC,WAAhE;AACD;AAjCG;;AAAA;AAAA,GAAN;;kBAoCerC,M","file":"index.js","sourcesContent":["import path from 'path';\r\nimport UsersController from './../controllers/UsersController';\r\nimport RequestController from './../controllers/RequestController';\r\nimport ContactController from './../controllers/ContactController';\r\nimport AdminController from './../controllers/AdminController';\r\nimport secureRoute from './../middlewares/getToken';\r\nimport usersUpload from './../middlewares/uploadfile';\r\nimport swaggerUi from 'swagger-ui-express';\r\nimport swaggerApiDoc from './../../../swaggerApiDoc/swaggerApiDoc.json';\r\n\r\n// const requestController = new RequestController();\r\nconst Routes = class {\r\n  constructor() {\r\n    this.UsersController = UsersController;\r\n    this.RequestController = RequestController;\r\n    this.ContactController = ContactController;\r\n    this.AdminController = AdminController;\r\n  }\r\n  /* eslint-disable class-methods-use-thiss */\r\n  routes(app) {\r\n    app.get('/', (req, res) => {\r\n      res.status(200).sendFile(path.join(__dirname, './../../../client/index.html'));\r\n    });\r\n    app.use('/api/v1/docs', swaggerUi.serve, swaggerUi.setup(swaggerApiDoc));\r\n    // routes for us\r\n    app.post('/api/v1/auth/signup', usersUpload.single('profile-photo'), this.UsersController.signup);\r\n    app.post('/api/v1/auth/signin', this.UsersController.signin);\r\n    app.get('/api/v1/auth/services', this.UsersController.getServiceName);\r\n\r\n    // admin routes\r\n    app.get('/api/v1/requests', secureRoute, this.AdminController.getAllRequests);\r\n    app.put('/api/v1/requests/:requestId/disapprove', secureRoute, this.AdminController.rejectRequest);\r\n    app.put('/api/v1/requests/:requestId/approve', secureRoute, this.AdminController.approveRequest);\r\n    app.put('/api/v1/requests/:requestId/resolve', secureRoute, this.AdminController.resolveRequest);\r\n\r\n    // user routes\r\n    app.post('/api/v1/users/requests', secureRoute, this.RequestController.addRequest);\r\n    app.get('/api/v1/users/requests/:requestId', secureRoute, this.RequestController.getOneRequest);\r\n    app.get('/api/v1/users/requests', secureRoute, this.RequestController.getAllRequests);\r\n    app.put('/api/v1/users/requests/:requestId', secureRoute, this.RequestController.updateRequest);\r\n    app.delete('/api/v1/users/requests/:requestId', secureRoute, this.RequestController.deleteRequest);\r\n    // routes for contacts model\r\n    app.post('/api/v1/contacts', secureRoute, this.ContactController.addMessage);\r\n    app.get('/api/v1/contacts', secureRoute, this.ContactController.getMessages);\r\n  }\r\n};\r\n\r\nexport default Routes;\r\n"]}