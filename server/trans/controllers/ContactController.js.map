{"version":3,"sources":["../../src/controllers/ContactController.js"],"names":["users","models","contacts","ContactController","req","res","userId","parseInt","body","adminId","status","send","message","findById","then","user","create","title","catch","error"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEQA,K,GAAoBC,e,CAApBD,K;IAAOE,Q,GAAaD,e,CAAbC,Q;;AACf,IAAMC;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACJ;AADI,+BAEcC,GAFd,EAEmBC,GAFnB,EAEwB;AAC1B,UAAMC,SAASC,SAASH,IAAII,IAAJ,CAASF,MAAlB,EAA0B,EAA1B,CAAf;AACA,UAAMG,UAAUF,SAASH,IAAII,IAAJ,CAASC,OAAlB,EAA2B,EAA3B,CAAhB;AACA,UAAI,CAACH,MAAL,EAAa;AACX,eAAOD,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,wBAAX,EAArB,CAAP;AACD;AACD,aAAOZ,MACJa,QADI,CACKP,MADL,EAEJQ,IAFI,CAEC,UAACC,IAAD,EAAU;AACd,eAAOb,SACJc,MADI,CACG;AACNV,wBADM;AAENG,0BAFM;AAGNQ,iBAAOb,IAAII,IAAJ,CAASS,KAHV;AAINL,mBAASR,IAAII,IAAJ,CAASI;AAJZ,SADH,EAOJE,IAPI,CAOC,UAACF,OAAD,EAAa;AACjBP,cAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,4BADmB;AAEnBG;AAFmB,WAArB;AAID,SAZI,EAaJG,KAbI,CAaE;AAAA,iBAASb,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,KAArB,CAAT;AAAA,SAbF,CAAP;AAcD,OAjBI,EAkBJD,KAlBI,CAkBE;AAAA,eAASb,IAAIK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,KAArB,CAAT;AAAA,OAlBF,CAAP;AAmBD;AA3BG;;AAAA;AAAA,GAAN;;kBA8BehB,iB","file":"ContactController.js","sourcesContent":["import models from './../models/index';\r\n\r\nconst { users, contacts } = models;\r\nconst ContactController = class {\r\n  // create a new message\r\n  static addMessage(req, res) {\r\n    const userId = parseInt(req.body.userId, 10);\r\n    const adminId = parseInt(req.body.adminId, 10);\r\n    if (!userId) {\r\n      return res.status(400).send({ message: 'missing required field' });\r\n    }\r\n    return users\r\n      .findById(userId)\r\n      .then((user) => {\r\n        return contacts\r\n          .create({\r\n            userId,\r\n            adminId,\r\n            title: req.body.title,\r\n            message: req.body.message,\r\n          })\r\n          .then((message) => {\r\n            res.status(201).send({\r\n              message,\r\n              user,\r\n            });\r\n          })\r\n          .catch(error => res.status(400).send(error));\r\n      })\r\n      .catch(error => res.status(404).send(error));\r\n  }\r\n};\r\n\r\nexport default ContactController;\r\n"]}