{"version":3,"sources":["../../src/middlewares/getToken.js"],"names":["secureRoute","req","res","next","token","headers","promise","Promise","resolve","reject","jwt","verify","process","env","SECRET_KEY","err","decode","status","send"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,cAAc,SAAdA,WAAc,CAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,MACpCC,KADoC,GAC1BH,IAAII,OADsB,CACpCD,KADoC;AAE5C;;AACA,MAAME,UAAU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/C,QAAIL,KAAJ,EAAW;AACTM,6BAAIC,MAAJ,CAAWP,KAAX,EAAkBQ,QAAQC,GAAR,CAAYC,UAA9B,EAA0C,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACzD,YAAID,GAAJ,EAAS;AACPP,kBAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,eAArB,CAAR;AACD,SAFD,MAEO;AACL;AACAV,kBAAQL,MAAR;AACD;AACF,OAPD;AAQD,KATD,MASO;AACLK,cAAQN,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAArB,CAAR;AACD;AACF,GAbe,CAAhB;AAcA,SAAOZ,OAAP;AACD,CAlBD;kBAmBeN,W","file":"getToken.js","sourcesContent":["import jwt from 'jsonwebtoken';\r\n\r\nconst secureRoute = function (req, res, next) {\r\n  const { token } = req.headers;\r\n  /* eslint-disable no-unused-vars */\r\n  const promise = new Promise((resolve, reject) => {\r\n    if (token) {\r\n      jwt.verify(token, process.env.SECRET_KEY, (err, decode) => {\r\n        if (err) {\r\n          resolve(res.status(401).send('Invalid Token'));\r\n        } else {\r\n          // req.body.decode = decode;\r\n          resolve(next());\r\n        }\r\n      });\r\n    } else {\r\n      resolve(res.status(402).send('Please send a token'));\r\n    }\r\n  });\r\n  return promise;\r\n};\r\nexport default secureRoute;\r\n"]}