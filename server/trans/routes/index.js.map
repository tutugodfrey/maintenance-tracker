{"version":3,"sources":["../../src/routes/index.js"],"names":["UsersStorage","multer","diskStorage","destination","filename","req","file","cb","originalname","usersUpload","storage","Routes","UsersController","RequestController","ContactController","app","get","res","status","send","message","post","single","signup","signin","addRequest","getOneRequest","getAllRequests","put","updateRequest","delete","deleteRequest","addMessage","getMessages"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA,eAAeC,iBAAOC,WAAP,CAAmB;AACtCC,eAAa,uBADyB;AAEtCC,YAAU,kBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC3BA,OAAG,IAAH,EAASD,KAAKE,YAAd;AACD;AAJqC,CAAnB,CAArB;AAMA,IAAMC,cAAc,sBAAO,EAAEC,SAASV,YAAX,EAAP,CAApB;AACA;AACA,IAAMW;AACJ,oBAAc;AAAA;;AACZ,SAAKC,eAAL,GAAuBA,yBAAvB;AACA,SAAKC,iBAAL,GAAyBA,2BAAzB;AACA,SAAKC,iBAAL,GAAyBA,2BAAzB;AACD;AACD;;;AANI;AAAA;AAAA,2BAOGC,GAPH,EAOQ;AACVA,UAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACX,GAAD,EAAMY,GAAN,EAAc;AACzBA,YAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,qCAAX,EAArB;AACD,OAFD;;AAIA;AACAL,UAAIM,IAAJ,CAAS,sBAAT,EAAiCZ,YAAYa,MAAZ,CAAmB,eAAnB,CAAjC,EAAsE,KAAKV,eAAL,CAAqBW,MAA3F;AACAR,UAAIM,IAAJ,CAAS,sBAAT,EAAiC,KAAKT,eAAL,CAAqBY,MAAtD;AACA;AACAT,UAAIM,IAAJ,CAAS,wBAAT,EAAmC,KAAKR,iBAAL,CAAuBY,UAA1D;AACAV,UAAIC,GAAJ,CAAQ,mCAAR,EAA6C,KAAKH,iBAAL,CAAuBa,aAApE;AACAX,UAAIC,GAAJ,CAAQ,wBAAR,EAAkC,KAAKH,iBAAL,CAAuBc,cAAzD;AACAZ,UAAIa,GAAJ,CAAQ,mCAAR,EAA6C,KAAKf,iBAAL,CAAuBgB,aAApE;AACAd,UAAIe,MAAJ,CAAW,mCAAX,EAAgD,KAAKjB,iBAAL,CAAuBkB,aAAvE;;AAEA;AACAhB,UAAIM,IAAJ,CAAS,kBAAT,EAA6B,KAAKP,iBAAL,CAAuBkB,UAApD;AACAjB,UAAIC,GAAJ,CAAQ,kBAAR,EAA4B,KAAKF,iBAAL,CAAuBmB,WAAnD;AACD;AAzBG;;AAAA;AAAA,GAAN;;kBA4BetB,M","file":"index.js","sourcesContent":["import multer from 'multer';\r\nimport UsersController from './../controllers/UsersController';\r\nimport RequestController from './../controllers/RequestController';\r\nimport ContactController from './../controllers/ContactController';\r\n\r\nconst UsersStorage = multer.diskStorage({\r\n  destination: './public/users-photo/',\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\nconst usersUpload = multer({ storage: UsersStorage });\r\n// const requestController = new RequestController();\r\nconst Routes = class {\r\n  constructor() {\r\n    this.UsersController = UsersController;\r\n    this.RequestController = RequestController;\r\n    this.ContactController = ContactController;\r\n  }\r\n  /* eslint-disable class-methods-use-thiss */\r\n  routes(app) {\r\n    app.get('/', (req, res) => {\r\n      res.status(200).send({ message: 'welcome to the maintenance trackers' });\r\n    });\r\n\r\n    // routes for users\r\n    app.post('/api/v1/users/signup', usersUpload.single('profile-photo'), this.UsersController.signup);\r\n    app.post('/api/v1/users/signin', this.UsersController.signin);\r\n    // routes for requests model\r\n    app.post('/api/v1/users/requests', this.RequestController.addRequest);\r\n    app.get('/api/v1/users/requests/:requestId', this.RequestController.getOneRequest);\r\n    app.get('/api/v1/users/requests', this.RequestController.getAllRequests);\r\n    app.put('/api/v1/users/requests/:requestId', this.RequestController.updateRequest);\r\n    app.delete('/api/v1/users/requests/:requestId', this.RequestController.deleteRequest);\r\n\r\n    // routes for contacts model\r\n    app.post('/api/v1/contacts', this.ContactController.addMessage);\r\n    app.get('/api/v1/contacts', this.ContactController.getMessages);\r\n  }\r\n};\r\n\r\nexport default Routes;\r\n"]}