{"version":3,"sources":["../../src/test/endpointTests.js"],"names":["server","Server","app","expressServer","expect","chai","use","chaiHttp","process","env","NODE_ENV","console","log","describe","it","request","get","then","res","to","have","status","body","be","an","eql","message","length"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,IAAIC,aAAJ,EAAf;AACA,IAAMC,MAAMF,OAAOG,aAAP,EAAZ;IACQC,M,GAAWC,c,CAAXD,M;;AACRC,eAAKC,GAAL,CAASC,kBAAT;;AAEA;AACA,IAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AACnC;AACAC,UAAQC,GAAR,kDAA0DJ,QAAQC,GAAR,CAAYC,QAAtE;AACD,CAHD,MAGO;AACLG,WAAS,gBAAT,EAA2B,YAAM;AAC/B;AACAA,aAAS,MAAT,EAAiB,YAAM;AACrBC,SAAG,+BAAH,EAAoC,YAAM;AACxC,eAAOT,eAAKU,OAAL,CAAab,GAAb,EACJc,GADI,CACA,GADA,EAEJC,IAFI,CAEC,UAACC,GAAD,EAAS;AACbd,iBAAOc,GAAP,EAAYC,EAAZ,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAjB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBI,EAApB,CAAuBC,EAAvB,CAA0B,QAA1B;AACApB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBM,GAApB,CAAwB,EAAEC,SAAS,qCAAX,EAAxB;AACD,SANI,CAAP;AAOD,OARD;AASD,KAVD;;AAYAb,aAAS,qBAAT,EAAgC,YAAM;AACpCC,SAAG,8BAAH,EAAmC,YAAM;AACvC,eAAOT,eAAKU,OAAL,CAAab,GAAb,EACJc,GADI,CACA,wBADA,EAEJC,IAFI,CAEC,UAACC,GAAD,EAAS;AACbd,iBAAOc,GAAP,EAAYC,EAAZ,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAjB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBI,EAApB,CAAuBC,EAAvB,CAA0B,OAA1B;AACApB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBC,IAApB,CAAyBO,MAAzB,CAAgC,CAAhC;AACD,SANI,CAAP;AAOD,OARD;AASAb,SAAG,4CAAH,EAAiD,YAAM;AACrD,eAAOT,eAAKU,OAAL,CAAab,GAAb,EACJc,GADI,CACA,0BADA,EAEJC,IAFI,CAEC,UAACC,GAAD,EAAS;AACbd,iBAAOc,GAAP,EAAYC,EAAZ,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAjB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBI,EAApB,CAAuBC,EAAvB,CAA0B,QAA1B;AACApB,iBAAOc,IAAII,IAAX,EAAiBH,EAAjB,CAAoBM,GAApB,CAAwB,EAAE,SAAS,mBAAX,EAAxB;AACD,SANI,CAAP;AAOD,OARD;AASD,KAnBD;AAoBD,GAlCD;AAmCD","file":"endpointTests.js","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport Server from './../app';\r\n\r\nconst server = new Server();\r\nconst app = server.expressServer();\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\n// enforce test to run in test env\r\nif (process.env.NODE_ENV !== 'test') {\r\n  /* eslint-disable no-console */\r\n  console.log(`can't run test in non test env. you are in ${process.env.NODE_ENV} environment`);\r\n} else {\r\n  describe('API End Points', () => {\r\n    // test home route\r\n    describe('Home', () => {\r\n      it('should return welcome message', () => {\r\n        return chai.request(app)\r\n          .get('/')\r\n          .then((res) => {\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('Object');\r\n            expect(res.body).to.eql({ message: 'welcome to the maintenance trackers' });\r\n          });\r\n      });\r\n    });\r\n\r\n    describe('Empty request model', () => {\r\n      it('should return an empty array', () => {\r\n        return chai.request(app)\r\n          .get('/api/v1/users/requests')\r\n          .then((res) => {\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('array');\r\n            expect(res.body).to.have.length(0);\r\n          });\r\n      });\r\n      it('should return not found for the request id', () => {\r\n        return chai.request(app)\r\n          .get('/api/v1/users/requests/1')\r\n          .then((res) => {\r\n            expect(res).to.have.status(404);\r\n            expect(res.body).to.be.an('object');\r\n            expect(res.body).to.eql({ 'Error': 'request not found' });\r\n          });\r\n      });\r\n    });\r\n  });\r\n}\r\n"]}