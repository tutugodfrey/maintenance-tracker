{"version":3,"sources":["../../src/test/userRequestTest.js"],"names":["server","Server","app","expressServer","expect","chai","use","chaiHttp","signedInUser","createdRequest1","createdRequest2","request3","category","description","urgency","department","userId","status","request4","describe","it","request","post","send","username","regularUser1","password","then","res","Object","assign","body","to","have","be","an","property","token","a","get","set","eql","message","request1","id","equal","any","keys","request2","length","of","at","least","deep","include","members","put","delete"],"mappings":"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","file":"userRequestTest.js","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport Server from './../app';\r\nimport { regularUser1, regularUser2 } from './signupTest';\r\n\r\nconst server = new Server();\r\nconst app = server.expressServer();\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\nconst signedInUser = {};\r\nconst createdRequest1 = {};\r\nconst createdRequest2 = {};\r\n\r\nconst request3 = {\r\n  category: 'electrical',\r\n  description: 'Socket burned',\r\n  urgency: 'urgent',\r\n  department: 'baking',\r\n  userId: 9,\r\n  status: 'pending',\r\n};\r\n\r\nconst request4 = {\r\n  category: 'electrical',\r\n  description: '',\r\n  urgency: 'urgent',\r\n  department: 'baking',\r\n  userId: 2,\r\n  status: 'pending',\r\n};\r\n\r\nexport default describe('Users actions', () => {\r\n  it('should signin a User in and give a token', () => {\r\n    return chai.request(app)\r\n      .post('/api/v1/auth/signin')\r\n      .send({\r\n        username: regularUser1.username,\r\n        password: '1234',\r\n      })\r\n      .then((res) => {\r\n        Object.assign(signedInUser, res.body);\r\n        expect(res).to.have.status(200);\r\n        expect(res.body).to.be.an('Object');\r\n        expect(res.body).to.have.property('token');\r\n        expect(res.body.token).to.be.a('string');\r\n      });\r\n  });\r\n\r\n  describe('Empty request model', () => {\r\n    it('should return an empty array', () => {\r\n      return chai.request(app)\r\n        .get('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n        });\r\n    });\r\n\r\n    it('should return not found for the request id', () => {\r\n      return chai.request(app)\r\n        .get('/secure/api/v1/users/requests/1')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n  });\r\n  \r\n  describe('Create requests', () => {\r\n    it('should create a new request', () => {\r\n      const request1 = {\r\n        category: 'electrical',\r\n        description: 'Socket burned',\r\n        urgency: 'urgent',\r\n        department: 'baking',\r\n        userId: signedInUser.userId,\r\n        status: 'pending',\r\n      };\r\n      return chai.request(app)\r\n        .post('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .send(request1)\r\n        .then((res) => {\r\n          Object.assign(createdRequest1, res.body.request);\r\n          expect(res).to.have.status(201);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body.request.id).to.equal(1);\r\n          expect(res.body.request).to.have.any.keys(['description', 'category', 'userId']);\r\n        });\r\n    });\r\n\r\n    it('should create a new request', () => {\r\n      const request2 = {\r\n        category: 'electrical',\r\n        description: 'Socket burned',\r\n        urgency: 'urgent',\r\n        department: 'baking',\r\n        userId: signedInUser.userId,\r\n        status: 'pending',\r\n      };\r\n      return chai.request(app)\r\n        .post('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .send(request2)\r\n        .then((res) => {\r\n          Object.assign(createdRequest2, res.body.request);\r\n          expect(res).to.have.status(201);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body.request.id).to.equal(2);\r\n          expect(res.body.request).to.have.any.keys('description');\r\n          expect(res.body.request).to.have.any.keys('category');\r\n          expect(res.body.request).to.have.any.keys('userId');\r\n        });\r\n    });\r\n    it('should not create request for users that does not exist', () => {\r\n      return chai.request(app)\r\n        .post('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .send(request3)\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n        });\r\n    });\r\n\r\n    it('should not create request if a required field is not present', () => {\r\n      return chai.request(app)\r\n        .post('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .send(request4)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n  });\r\n\r\n  // test for get ../users/requests/:requestId\r\n  describe('get one request', () => {\r\n    it('should return a request with the given id for a logged in user', () => {\r\n      const { id, userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests/${id}?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.have.any.keys('userId');\r\n        });\r\n    });\r\n\r\n    it('should return not found for requestId that does not exist for a logged in user', () => {\r\n      const { userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests/5?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'request not found' });\r\n        });\r\n    });\r\n\r\n    it('should return not found for the requestId with no matching userId', () => {\r\n      const { id } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests/${id}?userId=6`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'request not found' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if either userId nor requestId is invalid', () => {\r\n      const { id } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests/${id}?userId=0`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if either userId nor requestId is invalid', () => {\r\n      const { userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests/0?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if neither userId nor requestId is valid', () => {\r\n      return chai.request(app)\r\n        .get('/secure/api/v1/users/requests/0?userId=0')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n  });\r\n\r\n  // test for get ../users/requests\r\n  describe('get all request', () => {\r\n    it('should return all request for logged in user', () => {\r\n      const { userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .get(`/secure/api/v1/users/requests?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('array');\r\n          expect(res.body).to.have.length.of.at.least(1);\r\n          expect(res.body).to.deep.include.members([createdRequest1]);\r\n        });\r\n    });\r\n\r\n    it('should return an empty array if no matching userId is found', () => {\r\n      return chai.request(app)\r\n        .get('/secure/api/v1/users/requests?userId=10')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('array');\r\n          expect(res.body.length).to.equal(0);\r\n        });\r\n    });\r\n\r\n    it('should return bad request if userId is not supplied in query', () => {\r\n      return chai.request(app)\r\n        .get('/secure/api/v1/users/requests')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('Users request update', () => {\r\n    it('users should be able to modify the other field except the status of a request', () => {\r\n      const { id, userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .put(`/secure/api/v1/users/requests/${id}?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .send({\r\n          description: 'wall socket got burned and need replacement',\r\n        })\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body.description).to.equal('wall socket got burned and need replacement');\r\n        });\r\n    });\r\n\r\n    it('users should not be able to modify the status of a request', () => {\r\n      const { id, userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .put(`/secure/api/v1/users/requests/${id}?userId=${userId}&isAdmin=`)\r\n        .set('token', signedInUser.token)\r\n        .send({\r\n          status: 'approved',\r\n        })\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body.status).to.equal('pending');\r\n        });\r\n    });\r\n\r\n    it('should return not found for a request that does not exist', () => {\r\n      const { userId } = createdRequest1;\r\n      return chai.request(app)\r\n        .put(`/secure/api/v1/users/requests/4?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .send({\r\n          description: 'wall socket got burned and need replacement',\r\n        })\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n        });\r\n    });\r\n\r\n    it('should return not found for a request with no matching userId', () => {\r\n      const { id } = createdRequest1;\r\n      return chai.request(app)\r\n        .put(`/secure/api/v1/users/requests/${id}?userId=10`)\r\n        .set('token', signedInUser.token)\r\n        .send({\r\n          description: 'wall socket got burned and need replacement',\r\n        })\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n        });\r\n    });\r\n  });\r\n\r\n  // test for delete ../users/requests/:requestId\r\n  describe('delete request', () => {\r\n    it('should delete a request', () => {\r\n      const { id, userId } = createdRequest2;\r\n      return chai.request(app)\r\n        .delete(`/secure/api/v1/users/requests/${id}?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(200);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'request has been deleted' });\r\n        });\r\n    });\r\n\r\n    it('should return not found request that does not exist', () => {\r\n      const { userId } = createdRequest2;\r\n      return chai.request(app)\r\n        .delete(`/secure/api/v1/users/requests/4?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(404);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'request not found, not action taken' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if requestId is not specified params', () => {\r\n      const { userId } = createdRequest2;\r\n      return chai.request(app)\r\n        .delete(`/secure/api/v1/users/requests/0?userId=${userId}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if requestId and userId is invalid', () => {\r\n      return chai.request(app)\r\n        .delete('/secure/api/v1/users/requests/0?userId=0')\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n\r\n    it('should return bad request if requestId is given but userId is not specified in query', () => {\r\n      const { id } = createdRequest2;\r\n      return chai.request(app)\r\n        .delete(`/secure/api/v1/users/requests/${id}`)\r\n        .set('token', signedInUser.token)\r\n        .then((res) => {\r\n          expect(res).to.have.status(400);\r\n          expect(res.body).to.be.an('object');\r\n          expect(res.body).to.eql({ message: 'missing required field' });\r\n        });\r\n    });\r\n  })\r\n});\r\n\r\nexport {\r\n  createdRequest1,\r\n  createdRequest2,\r\n}"]}